<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .hidden {
            display: none;
        }

        .warning {
            color: red;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body>
<div class="text-center">
    <h2>Create new color</h2>
    <label>Color name</label>
    <label>
        <input type="text" class="name" required>
    </label><br><br>
    <div class="warning hidden first">Данный цвет уже существует</div>
    <label>Color type</label>
    <label>
        <input type="text"
               list="colorType" class="type" required/>
        <datalist id="colorType">
            <option>RGB</option>
            <option>RGBA</option>
            <option>HEX</option>
        </datalist>
    </label><br><br>
    <div class="warning hidden second">Uncorrect color</div>
    <label>Color</label>
    <label>
        <input type="text" class="color" required>
    </label>
    <br><br>
    <button type="button" class="btn btn-dark">Save</button>
    <div class="res"></div>
</div>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script>
    let arr = []
    let errorFirst = document.querySelector('.first')
    let errorSecond = document.querySelector('.second')

    function createElement(name, color, br, type, backgroundType) {
        console.log('true')
        for (let i = 0; i < arr.length; i++){
            if (arr[i]===name){
                errorFirst.classList.remove('hidden')
                return
            }
        }
        arr.push(name)
        let elem = document.createElement('div')
        elem.style.padding = '60px'
        elem.style.backgroundColor = `${backgroundType}`
        let elemIn = document.createElement('div')
        elemIn.style.padding = '40px'
        elemIn.style.backgroundColor = `rgba(255,255,255,0.5)`
        elem.append(elemIn)
        elemIn.append(`${name}`)
        elemIn.append(br)
        elemIn.append(`${type}`)
        elemIn.append(br)
        elemIn.append(`${color}`)
        document.querySelector(".res").append(elem)
    }

    function checkHidden() {
        if (errorSecond.style.hidden !== false)
            errorSecond.classList.add('hidden')
        if (errorFirst.style.hidden !== false)
            errorFirst.classList.add('hidden')
    }

    document.querySelector("button").onclick = () => {
        checkHidden();
        let name = document.querySelector('.name').value
        let type = document.querySelector('.type').value
        let color = document.querySelector('.color').value
        let regRGB = new RegExp('(\\d{1,3}),(\\d{1,3}),(\\d{1,3})')
        let regRGBA = new RegExp('(\\d{1,3}),(\\d{1,3}),(\\d{1,3}),([1-2])')
        let regHEX = new RegExp('^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$')
        let br = document.createElement('br')
        if (type === 'RGB' && color.match(regRGB)) {
            createElement(name, color, br, type, `rgb(${color})`);
        } else if (type === 'RGB') {
            errorSecond.innerHTML = 'RGB format: [0-255],[0-255],[0-255]'
            errorSecond.classList.remove('hidden')
        }
        if (type === 'RGBA' && color.match(regRGBA)) {
            createElement(name, color, br, type, `rgba(${color})`);
        } else if (type === 'RGBA') {
            errorSecond.innerHTML = 'RGB format: [0-255],[0-255],[0-255],[1-2]'
            errorSecond.classList.remove('hidden')
        }
        if (type === 'HEX' && color.match(regHEX)) {
            createElement(name, color, br, type, `${color}`);
        } else if (type === 'HEX') {
            errorSecond.innerHTML = 'HEX code format #******'
            errorSecond.classList.remove('hidden')
        }
    }
</script>
</body>
</html>